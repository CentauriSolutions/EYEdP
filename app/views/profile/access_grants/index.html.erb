<%= render  partial: 'profile/heading' %>

<div class="row">
  <div class="col-md-9 col-lg-10">
    <h2>Authorised Applications <%= link_to "Revoke All", profile_revoke_access_grants_path, method: :delete, class: 'btn btn-sm btn-dark' %></h2>

  </div>
</div>
<div class="row">
  <div class="col-12">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Name</th>
          <th>Last Used</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <%- @tokens.each do |token| %>
          <tr>
            <td><%= token.application.name %></td>
            <td><%= token.created_at %></td>
            <td><%= link_to 'Revoke', profile_access_grants_path(id: token.id, kind: 'token'), method: :delete, class: 'btn btn-danger' %></td>
          </tr>
        <%- end %>
        <%- @grants.each do |token| %>
          <tr>
            <td><%= token.application.name %></td>
            <td><%= token.created_at %></td>
            <td><%= link_to 'Revoke', profile_access_grants_path(id: token.id, kind: 'grant'), method: :delete, class: 'btn btn-danger' %></td>
          </tr>
        <%- end %>
      </tbody>
    </table>
  </div>
</div>
