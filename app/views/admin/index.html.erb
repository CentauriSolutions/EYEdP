<!-- <h1><%= @models.klass.name.pluralize %> <%= link_to "New #{ @models.klass.name}", [:new, :admin, @models.klass.name.underscore.gsub('/', '_').to_sym], class: "btn btn-sm btn-dark", data: { title: 'New User', remote: url_for([:new, :admin, @models.klass.name.underscore.gsub('/', '_').to_sym, :format => "js"]), toggle: "modal", target: "#edit-modal", hotkey: 'n' } %></h1> -->
<div class="row mb-5">
  <div class="col-md-6"></div>
  <div class="col-md-6 ml-auto">

    <%- if filter_whitelist.any? %>
      <p class="small">Search</p>
    <%- end %>
    <div class="float-right">
      <%= link_to "New #{ @models.klass.name}", [:new, :admin, @models.klass.name.underscore.gsub('/', '_').to_sym], class: "btn btn-sm btn-dark", data: { title: 'New User', remote: url_for([:new, :admin, @models.klass.name.underscore.gsub('/', '_').to_sym, :format => "js"]), toggle: "modal", target: "#edit-modal", hotkey: 'n' } %>
    </div>
    <%- if filter_whitelist.any? %>
      <div class="" style="width: auto; overflow: auto">
        <%= form_tag '', method: :get, class: 'form form-inline search' do %>
           <div class="right-inner-addon" style="width: 100%">
             <%= fa_icon('search') %>
             <%= text_field_tag :search, params[:search], value: params[:search], placeholder: filter_whitelist.map(&:titlecase).join(' or '), class: 'form-control', style:"width: 100%" %>
           </div>
        <%- end %>
      </div>
    <%- end %>
  </div>
</div>
<div class="row">
  <table class="table table-striped">
    <thead class="admin">
      <tr>
        <th></th>
        <%- model_attributes.each do |attr_name| %>
          <th>
            <%= attr_name.gsub('_', ' ') %>
            <%- if sort_whitelist.include? attr_name %>
              <%= link_to fa_icon("sort-asc"), current_page_params.merge(sort_by: attr_name, sort_dir: 'asc') %>
              <%= link_to fa_icon("sort-desc"), current_page_params.merge(sort_by: attr_name, sort_dir: 'desc') %>
            <%- end %>
          </th>
        <%- end %>
      </tr>
    </thead>

    <tbody>
      <% @models.each do |model| %>
        <tr>
          <td><nobr>
          <%= link_to fa_icon('pencil', title: 'Edit'), [:edit, :admin, model], class: "btn btn-mini", data: { title: model.to_s, remote: url_for([:edit, :admin, model, :format => "js"]), toggle: "modal", target: "#edit-modal"} %>
          <%= link_to fa_icon('eye', title: 'Show'), [:admin, model], class: 'btn btn-mini' %>
          <%- if can_destroy? %>
            <%= link_to fa_icon('trash-o', title: "Delete"), [:admin, model], method: :delete,  class: "btn btn-mini", data: { confirm: 'Are you sure?' } %>
          <%- end %>
            </nobr></td>
          <%- model_attributes.each do |attr_name| %>
          <%= render partial: 'model_field', locals: { model: model, attr_name: attr_name } %>
          <%- end %>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= will_paginate @models, renderer: WillPaginate::ActionView::BootstrapLinkRenderer %>
</div>
<%= render partial: 'edit_modal' %>
